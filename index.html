
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
    <title>Matrix Animation</title>
    <meta name="description" content="Matrix animation written in TypeScript" />
    <meta name="author" content="Andrew Knackstedt" />
    <link rel="base" href="https://dotglitch.dev/" />
    <link rel="canonical" href="https://dotglitch.dev/" />
    <meta rel="sitemap" type="application/xml" content="https://dotglitch.dev/sitemap.xml" />
    <meta name="robots" content="index/follow" />
    <meta name="googlebot" content="index/follow" />
    <meta name="theme-color" content="#FF4455" />
    <meta name="msapplication-navbutton-color" content="#FF4455" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#FF4455" />
    <!-- Schema.org markup for Google+ -->
    <meta itemprop="name" content="Matrix Animation" />
    <meta itemprop="description" content="Matrix animation written in TypeScript" />
    <meta itemprop="image" content="https://dotglitch.dev/assets/logo.svg" />
    <!-- markup for facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Matrix Animation" />
    <meta property="og:url" content="https://dotglitch.dev/" />
    <meta property="og:site_name" content="Example" />
    <meta property="og:image" content="https://dotglitch.dev/assets/logo.svg" />
    <meta property="og:description" content="Matrix animation written in TypeScript" />
    <meta property="og:locale" content="pt_BR" />
    <meta property="fb:app_id" content="0" />
    <meta property="fb:admins" content="0" />
    <!-- markup for twitter -->
    <meta name="twitter:card" content="Matrix Animation" />
    <meta name="twitter:title" content="TypeScript Matrix Animation" />
    <meta name="twitter:description" content="Matrix animation written in TypeScript" />
    <meta name="twitter:creator" content="Andrew Knackstedt" />
    <meta name="twitter:image" content="https://dotglitch.dev/assets/logo.svg" />
    <!-- JSON-LD - structured data markup Google Search -->
    <script type="application/ld+json">
    {"@context":"http://www.schema.org","@type":"website","name":"Matrix Animation","alternateName":"DotGlitch Matrix Animation","url":"https://matrix.dotglitch.dev/"}
    </script>

    <style>
        html, body { width: 100%; height: 100%; margin: 0; background-color: #121212; color: #efefef;}
        * { box-sizing: border-box}
        
        .container { height: 100% }
        .tweakpane { position: fixed; top: 10px; right: 10px; transition: transform 200ms ease;}
        .show-button { position: fixed; top: 0; right: -100vw; transition: opacity 200ms ease; width: 160px; height: 64px; background-color: #555; padding: 6px 12px; border: 0; border-bottom-left-radius: 6px; font-family:Arial, Helvetica, sans-serif; font-size: 24px; }
        .show-button:hover { opacity: 1 !important }

        @font-face {
            src: url(src/assets/Backwards.ttf);
            font-family: "Backwards";
        }
    </style>
</head>
<body>
    <div style="height: 100%;">
        <div class="container"></div>
        <div class="tweakpane"></div>
        <div class="show-button">Show Panel</div>
    </div>
    <script type="module" type="text/javascript">
        import { Pane } from 'https://cdn.jsdelivr.net/npm/tweakpane@4.0.3/dist/tweakpane.min.js';
        import { MatrixAnimation } from './src/main.ts';
        import MatrixPreset from './src/presets/matrix.ts';
        import DigitalRainPreset from './src/presets/digital-rain.ts';
        import RainPreset from './src/presets/rain.ts';
        import MeteorRainPreset from './src/presets/meteor-rain.ts';
    
        let currentConfig = structuredClone(MatrixPreset);
        const animation = new MatrixAnimation(".container", currentConfig);

        const presetMap = {
            "default": MatrixPreset,
            "digitalRain": DigitalRainPreset,
            "rain": RainPreset,
            "meteor": MeteorRainPreset
        }
        let currentPreset = 'default';

        let pane;
        const initPane = () => {

            const element = document.querySelector(".tweakpane");
            const btn = document.querySelector(".show-button");

            element.style.right = "10px";
            btn.style.opacity = 1;
            btn.style.right = "-100vw";

            pane?.dispose();
            pane = new Pane({
                container: element
            });

            const base = pane.addFolder({
                title: 'options',
                expanded: true,
            });

            base.addBinding({ preset: currentPreset }, 'preset', {
                options: {
                    "Matrix": 'default',
                    "Digital Rain": 'digitalRain',
                    "Rain": 'rain',
                    "Meteor Rain": 'meteor',
                },
            }).on('change', ({ value }) => {
                const options = presetMap[currentPreset = value];
                currentConfig = structuredClone(options);
                
                // Update the animation
                animation.pause();
                animation.options = structuredClone(options);
                animation.applyOptions();
                animation.resetRaindrops();
                animation.play();

                setTimeout(() => {
                    initPane();
                })
            });

            base.addBinding({ chars: 'Matrix' }, 'chars', {
                options: {
                    "Matrix": "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ„Ç¢„Ç°„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É£„É©„ÉØ„Ç¨„Ç∂„ÉÄ„Éê„Éë„Ç§„Ç£„Ç≠„Ç∑„ÉÅ„Éã„Éí„Éü„É™„É∞„ÇÆ„Ç∏„ÉÇ„Éì„Éî„Ç¶„Ç•„ÇØ„Çπ„ÉÑ„Éå„Éï„É†„É¶„É•„É´„Ç∞„Ç∫„Éñ„ÉÖ„Éó„Ç®„Çß„Ç±„Çª„ÉÜ„Éç„Éò„É°„É¨„É±„Ç≤„Çº„Éá„Éô„Éö„Ç™„Ç©„Ç≥„ÇΩ„Éà„Éé„Éõ„É¢„É®„Éß„É≠„É≤„Ç¥„Çæ„Éâ„Éú„Éù„É¥„ÉÉ„É≥",
                    "Braille": "‚†Å‚†Ç‚†É‚†Ñ‚†Ö‚†Ü‚†á‚†à‚†â‚†ä‚†ã‚†å‚†ç‚†é‚†è‚†ê‚†ë‚†í‚†ì‚†î‚†ï‚†ñ‚†ó‚†ò‚†ô‚†ö‚†õ‚†ú‚†ù‚†û‚†ü‚††‚†°‚†¢‚†£‚†§‚†•‚†¶‚†ß‚†®‚†©‚†™‚†´‚†¨‚†≠‚†Æ‚†Ø‚†∞‚†±‚†≤‚†≥‚†¥‚†µ‚†∂‚†∑‚†∏‚†π‚†∫‚†ª‚†º‚†Ω‚†æ‚†ø‚°Ä‚°Å‚°Ç‚°É‚°Ñ‚°Ö‚°Ü‚°á‚°à‚°â‚°ä‚°ã‚°å‚°ç‚°é‚°è‚°ê‚°ë‚°í‚°ì‚°î‚°ï‚°ñ‚°ó‚°ò‚°ô‚°ö‚°õ‚°ú‚°ù‚°û‚°ü‚°†‚°°‚°¢‚°£‚°§‚°•‚°¶‚°ß‚°®‚°©‚°™‚°´‚°¨‚°≠‚°Æ‚°Ø‚°∞‚°±‚°≤‚°≥‚°¥‚°µ‚°∂‚°∑‚°∏‚°π‚°∫‚°ª‚°º‚°Ω‚°æ‚°ø‚¢Ä‚¢Å‚¢Ç‚¢É‚¢Ñ‚¢Ö‚¢Ü‚¢á‚¢à‚¢â‚¢ä‚¢ã‚¢å‚¢ç‚¢é‚¢è‚¢ê‚¢ë‚¢í‚¢ì‚¢î‚¢ï‚¢ñ‚¢ó‚¢ò‚¢ô‚¢ö‚¢õ‚¢ú‚¢ù‚¢û‚¢ü‚¢†‚¢°‚¢¢‚¢£‚¢§‚¢•‚¢¶‚¢ß‚¢®‚¢©‚¢™‚¢´‚¢¨‚¢≠‚¢Æ‚¢Ø‚¢∞‚¢±‚¢≤‚¢≥‚¢¥‚¢µ‚¢∂‚¢∑‚¢∏‚¢π‚¢∫‚¢ª‚¢º‚¢Ω‚¢æ‚¢ø‚£Ä‚£Å‚£Ç‚£É‚£Ñ‚£Ö‚£Ü‚£á‚£à‚£â‚£ä‚£ã‚£å‚£ç‚£é‚£è‚£ê‚£ë‚£í‚£ì‚£î‚£ï‚£ñ‚£ó‚£ò‚£ô‚£ö‚£õ‚£ú‚£ù‚£û‚£ü‚£†‚£°‚£¢‚££‚£§‚£•‚£¶‚£ß‚£®‚£©‚£™‚£´‚£¨‚£≠‚£Æ‚£Ø‚£∞‚£±‚£≤‚£≥‚£¥‚£µ‚£∂‚£∑‚£∏‚£π‚£∫‚£ª‚£º‚£Ω‚£æ‚£ø",
                    "Numbers": "0123456789",
                    "Symbols": "+=#%*/\\[]{}()&^$@!~`'\"|<>,.?",
                    "Mathematical Operators": "‚äï‚äñ‚äó‚äò‚äô‚äö‚äõ‚äú‚äù‚äû‚äü‚ä†‚ä°",
                    "Shade Blocks": "‚ñë‚ñí‚ñì‚ñà",
                    "Blocks Elements": "‚ñÄ‚ñÅ‚ñÇ‚ñÉ‚ñÑ‚ñÖ‚ñÜ‚ñá‚ñà‚ñâ‚ñä‚ñã‚ñå‚ñç‚ñé‚ñè‚ñê",
                    "Block Quadrants": "‚ññ‚ñó‚ñò‚ñô‚ñö‚ñõ‚ñú‚ñù‚ñû‚ñü",
                    "Bengali": "‡¶Ä‡¶Ö‡¶Ü‡¶á‡¶à‡¶â‡¶ä‡¶ã‡¶å‡¶è‡¶ê‡¶ì‡¶î‡¶ï‡¶ñ‡¶ó‡¶ò‡¶ô‡¶ö‡¶õ‡¶ú‡¶ù‡¶û‡¶ü‡¶†‡¶°‡¶¢‡¶£‡¶§‡¶•‡¶¶‡¶ß‡¶®‡¶™‡¶´‡¶¨‡¶≠‡¶Æ‡¶Ø‡¶∞‡¶≤‡¶∂‡¶∑‡¶∏‡¶π‡¶Ω‡ßé‡ßú‡ßù‡ßü‡ß†‡ß°‡ß¶‡ßß‡ß®‡ß©‡ß™‡ß´‡ß¨‡ß≠‡ßÆ‡ßØ‡ß∞‡ß±‡ß≤‡ß≥‡ß¥‡ßµ‡ß∂‡ß∑‡ß∏‡ßπ‡ß∫‡ßª‡ßº‡ßΩ",
                    "Rejang": "Í§∞Í§±Í§≤Í§≥Í§¥Í§µÍ§∂Í§∑Í§∏Í§πÍ§∫Í§ªÍ§ºÍ§ΩÍ§æÍ§øÍ•ÄÍ•ÅÍ•ÇÍ•ÉÍ•ÑÍ•ÖÍ•Ü",
                    "Runic": "·ö†·ö°·ö¢·ö£·ö§·ö•·ö¶·öß·ö®·ö©·ö™·ö´·ö¨·ö≠·öÆ·öØ·ö∞·ö±·ö≤·ö≥·ö¥·öµ·ö∂·ö∑·ö∏·öπ·ö∫·öª·öº·öΩ·öæ·öø·õÄ·õÅ·õÇ·õÉ·õÑ·õÖ·õÜ·õá·õà·õâ·õä·õã·õå·õç·õé·õè·õê·õë·õí·õì·õî·õï·õñ·õó·õò·õô·õö·õõ·õú·õù·õû·õü·õ†·õ°·õ¢·õ£·õ§·õ•·õ¶·õß·õ®·õ©·õ™·õ´·õ¨·õ≠·õÆ·õØ·õ∞·õ±·õ≤·õ≥·õ¥·õµ·õ∂·õ∑·õ∏",
                    "Tetragrams": "ùåÄùåÅùåÇùåÉùåÑùåÖùåÜùåáùåàùåâùåäùåãùååùåçùåéùåèùåêùåëùåíùåìùåîùåïùåñùåóùåòùåôùåöùåõùåúùåùùåûùåüùå†ùå°ùå¢ùå£ùå§ùå•ùå¶ùåßùå®ùå©ùå™ùå´ùå¨ùå≠ùåÆùåØùå∞ùå±ùå≤ùå≥ùå¥ùåµùå∂ùå∑ùå∏ùåπùå∫ùåªùåºùåΩùåæùåøùçÄùçÅùçÇùçÉùçÑùçÖùçÜùçáùçàùçâùçäùçãùçåùççùçéùçèùçêùçëùçíùçìùçîùçïùçñ",
                    "Zanzabar": "ë®Äë®ãë®åë®çë®éë®èë®êë®ëë®íë®ìë®îë®ïë®ñë®óë®òë®ôë®öë®õë®úë®ùë®ûë®üë®†ë®°ë®¢ë®£ë®§ë®•ë®¶ë®ßë®®ë®©ë®™ë®´ë®¨ë®≠ë®Æë®Øë®∞ë®±ë®≤ë®øë©Äë©Çë©Éë©Ñë©Öë©Ü",
                    "Old Turkic": "ê∞Äê∞Åê∞Çê∞Éê∞Ñê∞Öê∞Üê∞áê∞àê∞âê∞äê∞ãê∞åê∞çê∞éê∞èê∞êê∞ëê∞íê∞ìê∞îê∞ïê∞ñê∞óê∞òê∞ôê∞öê∞õê∞úê∞ùê∞ûê∞üê∞†ê∞°ê∞¢ê∞£ê∞§ê∞•ê∞¶ê∞ßê∞®ê∞©ê∞™ê∞´ê∞¨ê∞≠ê∞Æê∞Øê∞∞ê∞±ê∞≤ê∞≥ê∞¥ê∞µê∞∂ê∞∑ê∞∏ê∞πê∞∫ê∞ªê∞ºê∞Ωê∞æê∞øê±Äê±Åê±Çê±Éê±Ñê±Öê±Üê±áê±à",
                    "Aegan": "êÑáêÑàêÑâêÑäêÑãêÑåêÑçêÑéêÑèêÑêêÑëêÑíêÑìêÑîêÑïêÑñêÑóêÑòêÑôêÑöêÑõêÑúêÑùêÑûêÑüêÑ†êÑ°êÑ¢êÑ£êÑ§êÑ•êÑ¶êÑßêÑ®êÑ©êÑ™êÑ´êÑ¨êÑ≠êÑÆêÑØêÑ∞êÑ±êÑ≤êÑ≥",
                    "Geometric Shapes Extended": "üûÄüûÅüûÇüûÉüûÑüûÖüûÜüûáüûàüûâüûäüûãüûåüûçüûéüûèüûêüûëüûíüûìüûîüûïüûñüûóüûòüûôüûöüûõüûúüûùüûûüûüüû†üû°üû¢üû£üû§üû•üû¶üûßüû®üû©üû™üû´üû¨üû≠üûÆüûØüû∞üû±üû≤üû≥üû¥üûµüû∂üû∑üû∏üûπüû∫üûªüûºüûΩüûæüûøüüÄüüÅüüÇüüÉüüÑüüÖüüÜüüáüüàüüâüüäüüãüüåüüçüüéüüèüüêüüëüüíüüìüüîüüïüüñüüóüüò",
                    "Nushu": "õÖ∞õÖ±õÖ≤õÖ≥õÖ¥õÖµõÖ∂õÖ∑õÖ∏õÖπõÖ∫õÖªõÖºõÖΩõÖæõÖøõÜÄõÜÅõÜÇõÜÉõÜÑõÜÖõÜÜõÜáõÜàõÜâõÜäõÜãõÜåõÜçõÜéõÜèõÜêõÜëõÜíõÜìõÜîõÜïõÜñõÜóõÜòõÜôõÜöõÜõõÜúõÜùõÜûõÜüõÜ†õÜ°õÜ¢õÜ£õÜ§õÜ•õÜ¶õÜßõÜ®õÜ©õÜ™õÜ´õÜ¨õÜ≠õÜÆõÜØõÜ∞õÜ±õÜ≤õÜ≥õÜ¥õÜµõÜ∂õÜ∑õÜ∏õÜπõÜ∫õÜªõÜºõÜΩõÜæõÜøõáÄõáÅõáÇõáÉõáÑõáÖõáÜõááõáàõáâõáäõáãõáåõáçõáéõáèõáêõáëõáíõáìõáîõáïõáñõáóõáòõáôõáöõáõõáúõáùõáûõáüõá†õá°õá¢õá£õá§õá•õá¶õáßõá®õá©õá™õá´õá¨õá≠õáÆõáØõá∞õá±õá≤õá≥õá¥õáµõá∂õá∑õá∏õáπõá∫õáªõáºõáΩõáæõáøõàÄõàÅõàÇõàÉõàÑõàÖõàÜõàáõààõàâõàäõàãõàåõàçõàéõàèõàêõàëõàíõàìõàîõàïõàñõàóõàòõàôõàöõàõõàúõàùõàûõàüõà†õà°õà¢õà£õà§õà•õà¶õàßõà®õà©õà™õà´õà¨õà≠õàÆõàØõà∞õà±õà≤õà≥õà¥õàµõà∂õà∑õà∏õàπõà∫õàªõàºõàΩõàæõàøõâÄõâÅõâÇõâÉõâÑõâÖõâÜõâáõâàõââõâäõâãõâåõâçõâéõâèõâêõâëõâíõâìõâîõâïõâñõâóõâòõâôõâöõâõõâúõâùõâûõâüõâ†õâ°õâ¢õâ£õâ§õâ•õâ¶õâßõâ®õâ©õâ™õâ´õâ¨õâ≠õâÆõâØõâ∞õâ±õâ≤õâ≥õâ¥õâµõâ∂õâ∑õâ∏õâπõâ∫õâªõâºõâΩõâæõâøõäÄõäÅõäÇõäÉõäÑõäÖõäÜõäáõäàõäâõääõäãõäåõäçõäéõäèõäêõäëõäíõäìõäîõäïõäñõäóõäòõäôõäöõäõõäúõäùõäûõäüõä†õä°õä¢õä£õä§õä•õä¶õäßõä®õä©õä™õä´õä¨õä≠õäÆõäØõä∞õä±õä≤õä≥õä¥õäµõä∂õä∑õä∏õäπõä∫õäªõäºõäΩõäæõäøõãÄõãÅõãÇõãÉõãÑõãÖõãÜõãáõãàõãâõãäõããõãåõãçõãéõãèõãêõãëõãíõãìõãîõãïõãñõãóõãòõãôõãöõãõõãúõãùõãûõãüõã†õã°õã¢õã£õã§õã•õã¶õãßõã®õã©õã™õã´õã¨õã≠õãÆõãØõã∞õã±õã≤õã≥õã¥õãµõã∂õã∑õã∏õãπõã∫õãª",
                },
            }).on('change', ({ value }) => {
                const newArr = animation.options.charArrays = [value];
                animation.applyOptions();
                animation.raindrops.forEach(drop => drop.randomizeChars())
            });

            base.addBinding(animation.options, 'headBloomSize', { min: 0, max: 30, step: 1 });
            base.addBinding(animation.options, 'headBloomColor', { input: 'color:rgba' });
            base.addBinding(animation.options, 'trailBloomSize', { min: 0, max: 30, step: 1 });
            base.addBinding(animation.options, 'trailBloomColor', { input: 'color:rgba' });
            base.addBinding(animation.options, 'rainWidth', { min: 0, max: 100, step: 1 });
            // base.addBinding(animation.options, 'rainHeight', { min: 0, max: 100 });
            base.addBinding(animation.options, 'minFrameTime', { min: 5, max: 1000, step: 1 });
            // base.addBinding(animation.options, 'windSpeed', { min: 0, max: 20, step: 1 });
            // base.addBinding(animation.options, 'windDirection', { options: [{text: "Top=>Down", value: 'TD'}, { text: "Bottom=>Up", value: 'BU' }, { text: "Left=>Right", value: "LR"}, { text: "Right=>Left", value: "RL" }] }).on("change", ()=>{
            //     animation.initCanvasShift();
            // });
            // base.addBinding(animation.options, 'warmupIterations', { min: 0, max: 500, step: 1 });
            base.addBinding(animation.options, 'fadeStrength', { min: 0, max: 1 });


            const raindrop = pane.addFolder({
                title: 'Raindrop Options',
                expanded: true
            });

            raindrop.addBinding(animation.options.rainDrop, 'direction', { options: [{ text: "Top=>Down", value: 'TD' }, { text: "Bottom=>Up", value: 'BU' }, { text: "Left=>Right", value: "LR" }, { text: "Right=>Left", value: "RL" }] }).on('change', (ev) => {
                animation.options.rainDrop.direction = ev.value;
                animation.raindrops.forEach(rd => rd.initMoveDirection());
            });
            raindrop.addBinding(animation.options.rainDrop, 'headColor', { input: 'color:rgba' });
            raindrop.addBinding(animation.options.rainDrop, 'trailColor', { input: 'color:rgba' });
            raindrop.addBinding(animation.options.rainDrop, 'fontSize', { min: 1, max: 100, step: 1 });
            raindrop.addBinding(animation.options.rainDrop, 'jitterLeftStrength', { min: 0, max: 10, step: 1 });
            raindrop.addBinding(animation.options.rainDrop, 'jitterRightStrength', { min: 0, max: 10, step: 1 });
            raindrop.addBinding(animation.options.rainDrop, 'jitterUpStrength', { min: 0, max: 10, step: 1 });
            raindrop.addBinding(animation.options.rainDrop, 'jitterDownStrength', { min: 0, max: 10, step: 1 });
            raindrop.addBinding(animation.options.rainDrop, 'fontFamily');

            raindrop.on('change', (evt) => {
                const hardReload = 
                    [
                        'direction',
                    ].includes(evt.target.key);
                
                if (hardReload) {
                    // We need to reset the whole array of raindrops
                    animation.resetRaindrops();
                }
                else {
                    // Something we can directly trigger an update in the config
                    animation.raindrops.forEach(drop => {
                        drop.config[evt.target.key] = evt.value
                    })
                }
            })

            pane.addBlade({
                view: 'separator',
            });

            pane.addButton({
                title: 'Reset',
                // label: 'counter',   // optional
            }).on('click', () => {
                animation.applyOptions(currentConfig);
                initPane();
            });
            pane.addButton({
                title: 'Hide',
            }).on('click', () => {
                element.style.transform = "translateX(calc(100% + 10px))";
                btn.style.opacity = 1;
                // element.style.left = "100%";

                btn.style.right = "0";

                btn.onclick = () => {
                    btn.dispose();
                    element.style.transform = '';
                }

                setTimeout(() => {
                    btn.style.opacity = 0;
                }, 3000);
            });
        }

        initPane();
    </script>
</body>
</html>

